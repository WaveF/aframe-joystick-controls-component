{"version":3,"file":"aframe-joystick-controls-component.js","sources":["../node_modules/.pnpm/nipplejs@0.10.1/node_modules/nipplejs/src/utils.js","../node_modules/.pnpm/nipplejs@0.10.1/node_modules/nipplejs/src/super.js","../node_modules/.pnpm/nipplejs@0.10.1/node_modules/nipplejs/src/nipple.js","../node_modules/.pnpm/nipplejs@0.10.1/node_modules/nipplejs/src/collection.js","../node_modules/.pnpm/nipplejs@0.10.1/node_modules/nipplejs/src/manager.js","../node_modules/.pnpm/nipplejs@0.10.1/node_modules/nipplejs/src/index.js","../lib/main.js"],"sourcesContent":["///////////////////////\n///      UTILS      ///\n///////////////////////\n\nexport const distance = (p1, p2) => {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n\n    return Math.sqrt((dx * dx) + (dy * dy));\n};\n\nexport const angle = (p1, p2) => {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n\n    return degrees(Math.atan2(dy, dx));\n};\n\nexport const findCoord = (p, d, a) => {\n    const b = {x: 0, y: 0};\n    a = radians(a);\n    b.x = p.x - d * Math.cos(a);\n    b.y = p.y - d * Math.sin(a);\n    return b;\n};\n\nexport const radians = (a) => {\n    return a * (Math.PI / 180);\n};\n\nexport const degrees = (a) => {\n    return a * (180 / Math.PI);\n};\n\nexport const isPressed = (evt) => {\n    if (isNaN(evt.buttons)) {\n        return evt.pressure !== 0;\n    }\n    return evt.buttons !== 0;\n};\n\nconst timers = new Map();\nexport const throttle = (cb) => {\n    if (timers.has(cb)) {\n        clearTimeout(timers.get(cb));\n    }\n    timers.set(cb, setTimeout(cb, 100));\n};\n\nexport const bindEvt = (el, arg, handler) => {\n    const types = arg.split(/[ ,]+/g);\n    let type;\n    for (let i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (el.addEventListener) {\n            el.addEventListener(type, handler, false);\n        } else if (el.attachEvent) {\n            el.attachEvent(type, handler);\n        }\n    }\n};\n\nexport const unbindEvt = (el, arg, handler) => {\n    const types = arg.split(/[ ,]+/g);\n    let type;\n    for (let i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (el.removeEventListener) {\n            el.removeEventListener(type, handler);\n        } else if (el.detachEvent) {\n            el.detachEvent(type, handler);\n        }\n    }\n};\n\nexport const trigger = (el, type, data) => {\n    const evt = new CustomEvent(type, data);\n    el.dispatchEvent(evt);\n};\n\nexport const prepareEvent = (evt) => {\n    evt.preventDefault();\n    return evt.type.match(/^touch/) ? evt.changedTouches : evt;\n};\n\nexport const getScroll = () => {\n    const x = (window.pageXOffset !== undefined) ?\n        window.pageXOffset :\n        (document.documentElement || document.body.parentNode || document.body)\n            .scrollLeft;\n\n    const y = (window.pageYOffset !== undefined) ?\n        window.pageYOffset :\n        (document.documentElement || document.body.parentNode || document.body)\n            .scrollTop;\n    return {\n        x: x,\n        y: y\n    };\n};\n\nexport const applyPosition = (el, pos) => {\n    if (pos.top || pos.right || pos.bottom || pos.left) {\n        el.style.top = pos.top;\n        el.style.right = pos.right;\n        el.style.bottom = pos.bottom;\n        el.style.left = pos.left;\n    } else {\n        el.style.left = pos.x + 'px';\n        el.style.top = pos.y + 'px';\n    }\n};\n\nexport const getTransitionStyle = (property, values, time) => {\n    const obj = configStylePropertyObject(property);\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (typeof values === 'string') {\n                obj[i] = values + ' ' + time;\n            } else {\n                let st = '';\n                for (let j = 0, max = values.length; j < max; j += 1) {\n                    st += values[j] + ' ' + time + ', ';\n                }\n                obj[i] = st.slice(0, -2);\n            }\n        }\n    }\n    return obj;\n};\n\nexport const getVendorStyle = (property, value) => {\n    const obj = configStylePropertyObject(property);\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            obj[i] = value;\n        }\n    }\n    return obj;\n};\n\nexport const configStylePropertyObject = (prop) => {\n    const obj = {};\n    obj[prop] = '';\n    const vendors = ['webkit', 'Moz', 'o'];\n    vendors.forEach(function (vendor) {\n        obj[vendor + prop.charAt(0).toUpperCase() + prop.slice(1)] = '';\n    });\n    return obj;\n};\n\nexport const extend = (objA, objB) => {\n    for (let i in objB) {\n        if (objB.hasOwnProperty(i)) {\n            objA[i] = objB[i];\n        }\n    }\n    return objA;\n};\n\n// Overwrite only what's already present\nexport const safeExtend = (objA, objB) => {\n    const obj = {};\n    for (let i in objA) {\n        if (objA.hasOwnProperty(i) && objB.hasOwnProperty(i)) {\n            obj[i] = objB[i];\n        } else if (objA.hasOwnProperty(i)) {\n            obj[i] = objA[i];\n        }\n    }\n    return obj;\n};\n\n// Map for array or unique item.\nexport const map = (ar, fn) => {\n    if (ar.length) {\n        for (let i = 0, max = ar.length; i < max; i += 1) {\n            fn(ar[i]);\n        }\n    } else {\n        fn(ar);\n    }\n};\n\n// Clamp position within the range\nexport const clamp = (pos, nipplePos, size) => ({\n    //                          left-clamping        right-clamping\n    x: Math.min(Math.max(pos.x, nipplePos.x - size), nipplePos.x + size),\n    //                          top-clamping         bottom-clamping\n    y: Math.min(Math.max(pos.y, nipplePos.y - size), nipplePos.y + size)\n});\n","///////////////////////\n///   SUPER CLASS   ///\n///////////////////////\nimport * as u from './utils';\n\n// Constants\nvar isTouch = !!('ontouchstart' in window);\nvar isPointer = window.PointerEvent ? true : false;\nvar isMSPointer = window.MSPointerEvent ? true : false;\nvar events = {\n    touch: {\n        start: 'touchstart',\n        move: 'touchmove',\n        end: 'touchend, touchcancel'\n    },\n    mouse: {\n        start: 'mousedown',\n        move: 'mousemove',\n        end: 'mouseup'\n    },\n    pointer: {\n        start: 'pointerdown',\n        move: 'pointermove',\n        end: 'pointerup, pointercancel'\n    },\n    MSPointer: {\n        start: 'MSPointerDown',\n        move: 'MSPointerMove',\n        end: 'MSPointerUp'\n    }\n};\nvar toBind;\nvar secondBind = {};\nif (isPointer) {\n    toBind = events.pointer;\n} else if (isMSPointer) {\n    toBind = events.MSPointer;\n} else if (isTouch) {\n    toBind = events.touch;\n    secondBind = events.mouse;\n} else {\n    toBind = events.mouse;\n}\n\nfunction Super () {}\n\n// Basic event system.\nSuper.prototype.on = function (arg, cb) {\n    var self = this;\n    var types = arg.split(/[ ,]+/g);\n    var type;\n    self._handlers_ = self._handlers_ || {};\n\n    for (var i = 0; i < types.length; i += 1) {\n        type = types[i];\n        self._handlers_[type] = self._handlers_[type] || [];\n        self._handlers_[type].push(cb);\n    }\n    return self;\n};\n\nSuper.prototype.off = function (type, cb) {\n    var self = this;\n    self._handlers_ = self._handlers_ || {};\n\n    if (type === undefined) {\n        self._handlers_ = {};\n    } else if (cb === undefined) {\n        self._handlers_[type] = null;\n    } else if (self._handlers_[type] &&\n            self._handlers_[type].indexOf(cb) >= 0) {\n        self._handlers_[type].splice(self._handlers_[type].indexOf(cb), 1);\n    }\n\n    return self;\n};\n\nSuper.prototype.trigger = function (arg, data) {\n    var self = this;\n    var types = arg.split(/[ ,]+/g);\n    var type;\n    self._handlers_ = self._handlers_ || {};\n\n    for (var i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (self._handlers_[type] && self._handlers_[type].length) {\n            self._handlers_[type].forEach(function (handler) {\n                handler.call(self, {\n                    type: type,\n                    target: self\n                }, data);\n            });\n        }\n    }\n};\n\n// Configuration\nSuper.prototype.config = function (options) {\n    var self = this;\n    self.options = self.defaults || {};\n    if (options) {\n        self.options = u.safeExtend(self.options, options);\n    }\n};\n\n// Bind internal events.\nSuper.prototype.bindEvt = function (el, type) {\n    var self = this;\n    self._domHandlers_ = self._domHandlers_ || {};\n\n    self._domHandlers_[type] = function () {\n        if (typeof self['on' + type] === 'function') {\n            self['on' + type].apply(self, arguments);\n        } else {\n            // eslint-disable-next-line no-console\n            console.warn('[WARNING] : Missing \"on' + type + '\" handler.');\n        }\n    };\n\n    u.bindEvt(el, toBind[type], self._domHandlers_[type]);\n\n    if (secondBind[type]) {\n        // Support for both touch and mouse at the same time.\n        u.bindEvt(el, secondBind[type], self._domHandlers_[type]);\n    }\n\n    return self;\n};\n\n// Unbind dom events.\nSuper.prototype.unbindEvt = function (el, type) {\n    var self = this;\n    self._domHandlers_ = self._domHandlers_ || {};\n\n    u.unbindEvt(el, toBind[type], self._domHandlers_[type]);\n\n    if (secondBind[type]) {\n        // Support for both touch and mouse at the same time.\n        u.unbindEvt(el, secondBind[type], self._domHandlers_[type]);\n    }\n\n    delete self._domHandlers_[type];\n\n    return this;\n};\n\nexport default Super;\n","import Super from './super';\nimport * as u from './utils';\n\n///////////////////////\n///   THE NIPPLE    ///\n///////////////////////\n\nfunction Nipple (collection, options) {\n    this.identifier = options.identifier;\n    this.position = options.position;\n    this.frontPosition = options.frontPosition;\n    this.collection = collection;\n\n    // Defaults\n    this.defaults = {\n        size: 100,\n        threshold: 0.1,\n        color: 'white',\n        fadeTime: 250,\n        dataOnly: false,\n        restJoystick: true,\n        restOpacity: 0.5,\n        mode: 'dynamic',\n        zone: document.body,\n        lockX: false,\n        lockY: false,\n        shape: 'circle'\n    };\n\n    this.config(options);\n\n    // Overwrites\n    if (this.options.mode === 'dynamic') {\n        this.options.restOpacity = 0;\n    }\n\n    this.id = Nipple.id;\n    Nipple.id += 1;\n    this.buildEl()\n        .stylize();\n\n    // Nipple's API.\n    this.instance = {\n        el: this.ui.el,\n        on: this.on.bind(this),\n        off: this.off.bind(this),\n        show: this.show.bind(this),\n        hide: this.hide.bind(this),\n        add: this.addToDom.bind(this),\n        remove: this.removeFromDom.bind(this),\n        destroy: this.destroy.bind(this),\n        setPosition:this.setPosition.bind(this),\n        resetDirection: this.resetDirection.bind(this),\n        computeDirection: this.computeDirection.bind(this),\n        trigger: this.trigger.bind(this),\n        position: this.position,\n        frontPosition: this.frontPosition,\n        ui: this.ui,\n        identifier: this.identifier,\n        id: this.id,\n        options: this.options\n    };\n\n    return this.instance;\n}\n\nNipple.prototype = new Super();\nNipple.constructor = Nipple;\nNipple.id = 0;\n\n// Build the dom element of the Nipple instance.\nNipple.prototype.buildEl = function (options) {\n    this.ui = {};\n\n    if (this.options.dataOnly) {\n        return this;\n    }\n\n    this.ui.el = document.createElement('div');\n    this.ui.back = document.createElement('div');\n    this.ui.front = document.createElement('div');\n\n    this.ui.el.className = 'nipple collection_' + this.collection.id;\n    this.ui.back.className = 'back';\n    this.ui.front.className = 'front';\n\n    this.ui.el.setAttribute('id', 'nipple_' + this.collection.id +\n        '_' + this.id);\n\n    this.ui.el.appendChild(this.ui.back);\n    this.ui.el.appendChild(this.ui.front);\n\n    return this;\n};\n\n// Apply CSS to the Nipple instance.\nNipple.prototype.stylize = function () {\n    if (this.options.dataOnly) {\n        return this;\n    }\n    var animTime = this.options.fadeTime + 'ms';\n    var borderStyle = u.getVendorStyle('borderRadius', '50%');\n    var transitStyle = u.getTransitionStyle('transition', 'opacity', animTime);\n    var styles = {};\n    styles.el = {\n        position: 'absolute',\n        opacity: this.options.restOpacity,\n        display: 'block',\n        'zIndex': 999\n    };\n\n    styles.back = {\n        position: 'absolute',\n        display: 'block',\n        width: this.options.size + 'px',\n        height: this.options.size + 'px',\n        marginLeft: -this.options.size / 2 + 'px',\n        marginTop: -this.options.size / 2 + 'px',\n        background: this.options.color,\n        'opacity': '.5'\n    };\n\n    styles.front = {\n        width: this.options.size / 2 + 'px',\n        height: this.options.size / 2 + 'px',\n        position: 'absolute',\n        display: 'block',\n        marginLeft: -this.options.size / 4 + 'px',\n        marginTop: -this.options.size / 4 + 'px',\n        background: this.options.color,\n        'opacity': '.5',\n        transform: 'translate(0px, 0px)'\n    };\n\n    u.extend(styles.el, transitStyle);\n    if(this.options.shape === 'circle'){\n        u.extend(styles.back, borderStyle);\n    }\n    u.extend(styles.front, borderStyle);\n\n    this.applyStyles(styles);\n\n    return this;\n};\n\nNipple.prototype.applyStyles = function (styles) {\n    // Apply styles\n    for (var i in this.ui) {\n        if (this.ui.hasOwnProperty(i)) {\n            for (var j in styles[i]) {\n                this.ui[i].style[j] = styles[i][j];\n            }\n        }\n    }\n\n    return this;\n};\n\n// Inject the Nipple instance into DOM.\nNipple.prototype.addToDom = function () {\n    // We're not adding it if we're dataOnly or already in dom.\n    if (this.options.dataOnly || document.body.contains(this.ui.el)) {\n        return this;\n    }\n    this.options.zone.appendChild(this.ui.el);\n    return this;\n};\n\n// Remove the Nipple instance from DOM.\nNipple.prototype.removeFromDom = function () {\n    if (this.options.dataOnly || !document.body.contains(this.ui.el)) {\n        return this;\n    }\n    this.options.zone.removeChild(this.ui.el);\n    return this;\n};\n\n// Entirely destroy this nipple\nNipple.prototype.destroy = function () {\n    clearTimeout(this.removeTimeout);\n    clearTimeout(this.showTimeout);\n    clearTimeout(this.restTimeout);\n    this.trigger('destroyed', this.instance);\n    this.removeFromDom();\n    this.off();\n};\n\n// Fade in the Nipple instance.\nNipple.prototype.show = function (cb) {\n    var self = this;\n\n    if (self.options.dataOnly) {\n        return self;\n    }\n\n    clearTimeout(self.removeTimeout);\n    clearTimeout(self.showTimeout);\n    clearTimeout(self.restTimeout);\n\n    self.addToDom();\n\n    self.restCallback();\n\n    setTimeout(function () {\n        self.ui.el.style.opacity = 1;\n    }, 0);\n\n    self.showTimeout = setTimeout(function () {\n        self.trigger('shown', self.instance);\n        if (typeof cb === 'function') {\n            cb.call(this);\n        }\n    }, self.options.fadeTime);\n\n    return self;\n};\n\n// Fade out the Nipple instance.\nNipple.prototype.hide = function (cb) {\n    var self = this;\n\n    if (self.options.dataOnly) {\n        return self;\n    }\n\n    self.ui.el.style.opacity = self.options.restOpacity;\n\n    clearTimeout(self.removeTimeout);\n    clearTimeout(self.showTimeout);\n    clearTimeout(self.restTimeout);\n\n    self.removeTimeout = setTimeout(\n        function () {\n            var display = self.options.mode === 'dynamic' ? 'none' : 'block';\n            self.ui.el.style.display = display;\n            if (typeof cb === 'function') {\n                cb.call(self);\n            }\n\n            self.trigger('hidden', self.instance);\n        },\n        self.options.fadeTime\n    );\n\n    if (self.options.restJoystick) {\n        const rest = self.options.restJoystick;\n        const newPosition = {};\n\n        newPosition.x = rest === true || rest.x !== false ? 0 : self.instance.frontPosition.x;\n        newPosition.y = rest === true || rest.y !== false ? 0 : self.instance.frontPosition.y;\n\n        self.setPosition(cb, newPosition);\n    }\n\n    return self;\n};\n\n// Set the nipple to the specified position\nNipple.prototype.setPosition = function (cb, position) {\n    var self = this;\n    self.frontPosition = {\n        x: position.x,\n        y: position.y\n    };\n    var animTime = self.options.fadeTime + 'ms';\n\n    var transitStyle = {};\n    transitStyle.front = u.getTransitionStyle('transition',\n        ['transform'], animTime);\n\n    var styles = {front: {}};\n    styles.front = {\n        transform: 'translate(' + self.frontPosition.x + 'px,' + self.frontPosition.y + 'px)'\n    };\n\n    self.applyStyles(transitStyle);\n    self.applyStyles(styles);\n\n    self.restTimeout = setTimeout(\n        function () {\n            if (typeof cb === 'function') {\n                cb.call(self);\n            }\n            self.restCallback();\n        },\n        self.options.fadeTime\n    );\n};\n\nNipple.prototype.restCallback = function () {\n    var self = this;\n    var transitStyle = {};\n    transitStyle.front = u.getTransitionStyle('transition', 'none', '');\n    self.applyStyles(transitStyle);\n    self.trigger('rested', self.instance);\n};\n\nNipple.prototype.resetDirection = function () {\n    // Fully rebuild the object to let the iteration possible.\n    this.direction = {\n        x: false,\n        y: false,\n        angle: false\n    };\n};\n\nNipple.prototype.computeDirection = function (obj) {\n    var rAngle = obj.angle.radian;\n    var angle45 = Math.PI / 4;\n    var angle90 = Math.PI / 2;\n    var direction, directionX, directionY;\n\n    // Angular direction\n    //     \\  UP /\n    //      \\   /\n    // LEFT       RIGHT\n    //      /   \\\n    //     /DOWN \\\n    //\n    if (\n        rAngle > angle45 &&\n        rAngle < (angle45 * 3) &&\n        !obj.lockX\n    ) {\n        direction = 'up';\n    } else if (\n        rAngle > -angle45 &&\n        rAngle <= angle45 &&\n        !obj.lockY\n    ) {\n        direction = 'left';\n    } else if (\n        rAngle > (-angle45 * 3) &&\n        rAngle <= -angle45 &&\n        !obj.lockX\n    ) {\n        direction = 'down';\n    } else if (!obj.lockY) {\n        direction = 'right';\n    }\n\n    // Plain direction\n    //    UP                 |\n    // _______               | RIGHT\n    //                  LEFT |\n    //   DOWN                |\n    if (!obj.lockY) {\n        if (rAngle > -angle90 && rAngle < angle90) {\n            directionX = 'left';\n        } else {\n            directionX = 'right';\n        }\n    }\n\n    if (!obj.lockX) {\n        if (rAngle > 0) {\n            directionY = 'up';\n        } else {\n            directionY = 'down';\n        }\n    }\n\n    if (obj.force > this.options.threshold) {\n        var oldDirection = {};\n        var i;\n        for (i in this.direction) {\n            if (this.direction.hasOwnProperty(i)) {\n                oldDirection[i] = this.direction[i];\n            }\n        }\n\n        var same = {};\n\n        this.direction = {\n            x: directionX,\n            y: directionY,\n            angle: direction\n        };\n\n        obj.direction = this.direction;\n\n        for (i in oldDirection) {\n            if (oldDirection[i] === this.direction[i]) {\n                same[i] = true;\n            }\n        }\n\n        // If all 3 directions are the same, we don't trigger anything.\n        if (same.x && same.y && same.angle) {\n            return obj;\n        }\n\n        if (!same.x || !same.y) {\n            this.trigger('plain', obj);\n        }\n\n        if (!same.x) {\n            this.trigger('plain:' + directionX, obj);\n        }\n\n        if (!same.y) {\n            this.trigger('plain:' + directionY, obj);\n        }\n\n        if (!same.angle) {\n            this.trigger('dir dir:' + direction, obj);\n        }\n    } else {\n        this.resetDirection();\n    }\n\n    return obj;\n};\n\nexport default Nipple;\n","import Nipple from './nipple';\nimport Super from './super';\nimport * as u from './utils';\n\n///////////////////////////\n///   THE COLLECTION    ///\n///////////////////////////\n\nfunction Collection (manager, options) {\n    var self = this;\n    self.nipples = [];\n    self.idles = [];\n    self.actives = [];\n    self.ids = [];\n    self.pressureIntervals = {};\n    self.manager = manager;\n    self.id = Collection.id;\n    Collection.id += 1;\n\n    // Defaults\n    self.defaults = {\n        zone: document.body,\n        multitouch: false,\n        maxNumberOfNipples: 10,\n        mode: 'dynamic',\n        position: {top: 0, left: 0},\n        catchDistance: 200,\n        size: 100,\n        threshold: 0.1,\n        color: 'white',\n        fadeTime: 250,\n        dataOnly: false,\n        restJoystick: true,\n        restOpacity: 0.5,\n        lockX: false,\n        lockY: false,\n        shape: 'circle',\n        dynamicPage: false,\n        follow: false\n    };\n\n    self.config(options);\n\n    // Overwrites\n    if (self.options.mode === 'static' || self.options.mode === 'semi') {\n        self.options.multitouch = false;\n    }\n\n    if (!self.options.multitouch) {\n        self.options.maxNumberOfNipples = 1;\n    }\n    const computedStyle = getComputedStyle(self.options.zone.parentElement);\n    if (computedStyle && computedStyle.display === 'flex') {\n        self.parentIsFlex = true;\n    }\n\n    self.updateBox();\n    self.prepareNipples();\n    self.bindings();\n    self.begin();\n\n    return self.nipples;\n}\n\nCollection.prototype = new Super();\nCollection.constructor = Collection;\nCollection.id = 0;\n\nCollection.prototype.prepareNipples = function () {\n    var self = this;\n    var nips = self.nipples;\n\n    // Public API Preparation.\n    nips.on = self.on.bind(self);\n    nips.off = self.off.bind(self);\n    nips.options = self.options;\n    nips.destroy = self.destroy.bind(self);\n    nips.ids = self.ids;\n    nips.id = self.id;\n    nips.processOnMove = self.processOnMove.bind(self);\n    nips.processOnEnd = self.processOnEnd.bind(self);\n    nips.get = function (id) {\n        if (id === undefined) {\n            return nips[0];\n        }\n        for (var i = 0, max = nips.length; i < max; i += 1) {\n            if (nips[i].identifier === id) {\n                return nips[i];\n            }\n        }\n        return false;\n    };\n};\n\nCollection.prototype.bindings = function () {\n    var self = this;\n    // Touch start event.\n    self.bindEvt(self.options.zone, 'start');\n    // Avoid native touch actions (scroll, zoom etc...) on the zone.\n    self.options.zone.style.touchAction = 'none';\n    self.options.zone.style.msTouchAction = 'none';\n};\n\nCollection.prototype.begin = function () {\n    var self = this;\n    var opts = self.options;\n\n    // We place our static nipple\n    // if needed.\n    if (opts.mode === 'static') {\n        var nipple = self.createNipple(\n            opts.position,\n            self.manager.getIdentifier()\n        );\n        // Add it to the dom.\n        nipple.add();\n        // Store it in idles.\n        self.idles.push(nipple);\n    }\n};\n\n// Nipple Factory\nCollection.prototype.createNipple = function (position, identifier) {\n    var self = this;\n    var scroll = self.manager.scroll;\n    var toPutOn = {};\n    var opts = self.options;\n    var offset = {\n        x: self.parentIsFlex ? scroll.x : (scroll.x + self.box.left),\n        y: self.parentIsFlex ? scroll.y : (scroll.y + self.box.top)\n    };\n\n    if (position.x && position.y) {\n        toPutOn = {\n            x: position.x - offset.x,\n            y: position.y - offset.y\n        };\n    } else if (\n        position.top ||\n        position.right ||\n        position.bottom ||\n        position.left\n    ) {\n\n        // We need to compute the position X / Y of the joystick.\n        var dumb = document.createElement('DIV');\n        dumb.style.display = 'hidden';\n        dumb.style.top = position.top;\n        dumb.style.right = position.right;\n        dumb.style.bottom = position.bottom;\n        dumb.style.left = position.left;\n        dumb.style.position = 'absolute';\n\n        opts.zone.appendChild(dumb);\n        var dumbBox = dumb.getBoundingClientRect();\n        opts.zone.removeChild(dumb);\n\n        toPutOn = position;\n        position = {\n            x: dumbBox.left + scroll.x,\n            y: dumbBox.top + scroll.y\n        };\n    }\n\n    var nipple = new Nipple(self, {\n        color: opts.color,\n        size: opts.size,\n        threshold: opts.threshold,\n        fadeTime: opts.fadeTime,\n        dataOnly: opts.dataOnly,\n        restJoystick: opts.restJoystick,\n        restOpacity: opts.restOpacity,\n        mode: opts.mode,\n        identifier: identifier,\n        position: position,\n        zone: opts.zone,\n        frontPosition: {\n            x: 0,\n            y: 0\n        },\n        shape: opts.shape\n    });\n\n    if (!opts.dataOnly) {\n        u.applyPosition(nipple.ui.el, toPutOn);\n        u.applyPosition(nipple.ui.front, nipple.frontPosition);\n    }\n    self.nipples.push(nipple);\n    self.trigger('added ' + nipple.identifier + ':added', nipple);\n    self.manager.trigger('added ' + nipple.identifier + ':added', nipple);\n\n    self.bindNipple(nipple);\n\n    return nipple;\n};\n\nCollection.prototype.updateBox = function () {\n    var self = this;\n    self.box = self.options.zone.getBoundingClientRect();\n};\n\nCollection.prototype.bindNipple = function (nipple) {\n    var self = this;\n    var type;\n    // Bubble up identified events.\n    var handler = function (evt, data) {\n        // Identify the event type with the nipple's id.\n        type = evt.type + ' ' + data.id + ':' + evt.type;\n        self.trigger(type, data);\n    };\n\n    // When it gets destroyed.\n    nipple.on('destroyed', self.onDestroyed.bind(self));\n\n    // Other events that will get bubbled up.\n    nipple.on('shown hidden rested dir plain', handler);\n    nipple.on('dir:up dir:right dir:down dir:left', handler);\n    nipple.on('plain:up plain:right plain:down plain:left', handler);\n};\n\nCollection.prototype.pressureFn = function (touch, nipple, identifier) {\n    var self = this;\n    var previousPressure = 0;\n    clearInterval(self.pressureIntervals[identifier]);\n    // Create an interval that will read the pressure every 100ms\n    self.pressureIntervals[identifier] = setInterval(function () {\n        var pressure = touch.force || touch.pressure ||\n            touch.webkitForce || 0;\n        if (pressure !== previousPressure) {\n            nipple.trigger('pressure', pressure);\n            self.trigger('pressure ' +\n                nipple.identifier + ':pressure', pressure);\n            previousPressure = pressure;\n        }\n    }.bind(self), 100);\n};\n\nCollection.prototype.onstart = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var origEvt = evt;\n    evt = u.prepareEvent(evt);\n\n    // Update the box position\n    self.updateBox();\n\n    var process = function (touch) {\n        // If we can create new nipples\n        // meaning we don't have more active nipples than we should.\n        if (self.actives.length < opts.maxNumberOfNipples) {\n            self.processOnStart(touch);\n        }\n        else if(origEvt.type.match(/^touch/)){\n            // zombies occur when end event is not received on Safari\n            // first touch removed before second touch, we need to catch up...\n            // so remove where touches in manager that no longer exist\n            Object.keys(self.manager.ids).forEach(function(k){\n                if(Object.values(origEvt.touches).findIndex(function(t){return t.identifier===k;}) < 0){\n                    // manager has id that doesn't exist in touches\n                    var e = [evt[0]];\n                    e.identifier = k;\n                    self.processOnEnd(e);\n                }\n            });\n            if(self.actives.length < opts.maxNumberOfNipples){\n                self.processOnStart(touch);\n            }\n        }\n    };\n\n    u.map(evt, process);\n\n    // We ask upstream to bind the document\n    // on 'move' and 'end'\n    self.manager.bindDocument();\n    return false;\n};\n\nCollection.prototype.processOnStart = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var indexInIdles;\n    var identifier = self.manager.getIdentifier(evt);\n    var pressure = evt.force || evt.pressure || evt.webkitForce || 0;\n    var position = {\n        x: evt.pageX,\n        y: evt.pageY\n    };\n\n    var nipple = self.getOrCreate(identifier, position);\n\n    // Update its touch identifier\n    if (nipple.identifier !== identifier) {\n        self.manager.removeIdentifier(nipple.identifier);\n    }\n    nipple.identifier = identifier;\n\n    var process = function (nip) {\n        // Trigger the start.\n        nip.trigger('start', nip);\n        self.trigger('start ' + nip.id + ':start', nip);\n\n        nip.show();\n        if (pressure > 0) {\n            self.pressureFn(evt, nip, nip.identifier);\n        }\n        // Trigger the first move event.\n        self.processOnMove(evt);\n    };\n\n    // Transfer it from idles to actives.\n    if ((indexInIdles = self.idles.indexOf(nipple)) >= 0) {\n        self.idles.splice(indexInIdles, 1);\n    }\n\n    // Store the nipple in the actives array\n    self.actives.push(nipple);\n    self.ids.push(nipple.identifier);\n\n    if (opts.mode !== 'semi') {\n        process(nipple);\n    } else {\n        // In semi we check the distance of the touch\n        // to decide if we have to reset the nipple\n        var distance = u.distance(position, nipple.position);\n        if (distance <= opts.catchDistance) {\n            process(nipple);\n        } else {\n            nipple.destroy();\n            self.processOnStart(evt);\n            return;\n        }\n    }\n\n    return nipple;\n};\n\nCollection.prototype.getOrCreate = function (identifier, position) {\n    var self = this;\n    var opts = self.options;\n    var nipple;\n\n    // If we're in static or semi, we might already have an active.\n    if (/(semi|static)/.test(opts.mode)) {\n        // Get the active one.\n        // TODO: Multi-touche for semi and static will start here.\n        // Return the nearest one.\n        nipple = self.idles[0];\n        if (nipple) {\n            self.idles.splice(0, 1);\n            return nipple;\n        }\n\n        if (opts.mode === 'semi') {\n            // If we're in semi mode, we need to create one.\n            return self.createNipple(position, identifier);\n        }\n\n        // eslint-disable-next-line no-console\n        console.warn('Coudln\\'t find the needed nipple.');\n        return false;\n    }\n    // In dynamic, we create a new one.\n    nipple = self.createNipple(position, identifier);\n    return nipple;\n};\n\nCollection.prototype.processOnMove = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var identifier = self.manager.getIdentifier(evt);\n    var nipple = self.nipples.get(identifier);\n    var scroll = self.manager.scroll;\n\n    // If we're moving without pressing\n    // it's that we went out the active zone\n    if (!u.isPressed(evt)) {\n        this.processOnEnd(evt);\n        return;\n    }\n\n    if (!nipple) {\n        // This is here just for safety.\n        // It shouldn't happen.\n        // eslint-disable-next-line no-console\n        console.error('Found zombie joystick with ID ' + identifier);\n        self.manager.removeIdentifier(identifier);\n        return;\n    }\n\n    if (opts.dynamicPage) {\n        var elBox = nipple.el.getBoundingClientRect();\n        nipple.position = {\n            x: scroll.x + elBox.left,\n            y: scroll.y + elBox.top\n        };\n    }\n\n    nipple.identifier = identifier;\n\n    var size = nipple.options.size / 2;\n    var pos = {\n        x: evt.pageX,\n        y: evt.pageY\n    };\n\n    if (opts.lockX){\n        pos.y = nipple.position.y;\n    }\n    if (opts.lockY) {\n        pos.x = nipple.position.x;\n    }\n\n    var dist = u.distance(pos, nipple.position);\n    var angle = u.angle(pos, nipple.position);\n    var rAngle = u.radians(angle);\n    var force = dist / size;\n\n    var raw = {\n        distance: dist,\n        position: pos\n    };\n\n    // Clamp the position\n    var clamped_dist;\n    var clamped_pos;\n    if (nipple.options.shape === 'circle') {\n        // Clamp to a circle\n        clamped_dist = Math.min(dist, size);\n        clamped_pos = u.findCoord(nipple.position, clamped_dist, angle);\n    } else {\n        // Clamp to a square\n        clamped_pos = u.clamp(pos, nipple.position, size);\n        clamped_dist = u.distance(clamped_pos, nipple.position);\n    }\n\n    if (opts.follow) {\n        // follow behaviour\n        if (dist > size) {\n            let delta_x = pos.x - clamped_pos.x;\n            let delta_y = pos.y - clamped_pos.y;\n            nipple.position.x += delta_x;\n            nipple.position.y += delta_y;\n            nipple.el.style.top = (nipple.position.y - (self.box.top + scroll.y)) + 'px';\n            nipple.el.style.left = (nipple.position.x - (self.box.left + scroll.x)) + 'px';\n\n            dist = u.distance(pos, nipple.position);\n        }\n    } else {\n        // clamp behaviour\n        pos = clamped_pos;\n        dist = clamped_dist;\n    }\n\n    var xPosition = pos.x - nipple.position.x;\n    var yPosition = pos.y - nipple.position.y;\n\n    nipple.frontPosition = {\n        x: xPosition,\n        y: yPosition\n    };\n\n    if (!opts.dataOnly) {\n        nipple.ui.front.style.transform = 'translate(' + xPosition + 'px,' + yPosition + 'px)';\n    }\n\n    // Prepare event's datas.\n    var toSend = {\n        identifier: nipple.identifier,\n        position: pos,\n        force: force,\n        pressure: evt.force || evt.pressure || evt.webkitForce || 0,\n        distance: dist,\n        angle: {\n            radian: rAngle,\n            degree: angle\n        },\n        vector: {\n            x: xPosition / size,\n            y: - yPosition / size\n        },\n        raw: raw,\n        instance: nipple,\n        lockX: opts.lockX,\n        lockY: opts.lockY\n    };\n\n    // Compute the direction's datas.\n    toSend = nipple.computeDirection(toSend);\n\n    // Offset angles to follow units circle.\n    toSend.angle = {\n        radian: u.radians(180 - angle),\n        degree: 180 - angle\n    };\n\n    // Send everything to everyone.\n    nipple.trigger('move', toSend);\n    self.trigger('move ' + nipple.id + ':move', toSend);\n};\n\nCollection.prototype.processOnEnd = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var identifier = self.manager.getIdentifier(evt);\n    var nipple = self.nipples.get(identifier);\n    var removedIdentifier = self.manager.removeIdentifier(nipple.identifier);\n\n    if (!nipple) {\n        return;\n    }\n\n    if (!opts.dataOnly) {\n        nipple.hide(function () {\n            if (opts.mode === 'dynamic') {\n                nipple.trigger('removed', nipple);\n                self.trigger('removed ' + nipple.id + ':removed', nipple);\n                self.manager\n                    .trigger('removed ' + nipple.id + ':removed', nipple);\n                nipple.destroy();\n            }\n        });\n    }\n\n    // Clear the pressure interval reader\n    clearInterval(self.pressureIntervals[nipple.identifier]);\n\n    // Reset the direciton of the nipple, to be able to trigger a new direction\n    // on start.\n    nipple.resetDirection();\n\n    nipple.trigger('end', nipple);\n    self.trigger('end ' + nipple.id + ':end', nipple);\n\n    // Remove identifier from our bank.\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\n    }\n\n    // Clean our actives array.\n    if (self.actives.indexOf(nipple) >= 0) {\n        self.actives.splice(self.actives.indexOf(nipple), 1);\n    }\n\n    if (/(semi|static)/.test(opts.mode)) {\n        // Transfer nipple from actives to idles\n        // if we're in semi or static mode.\n        self.idles.push(nipple);\n    } else if (self.nipples.indexOf(nipple) >= 0) {\n        // Only if we're not in semi or static mode\n        // we can remove the instance.\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\n    }\n\n    // We unbind move and end.\n    self.manager.unbindDocument();\n\n    // We add back the identifier of the idle nipple;\n    if (/(semi|static)/.test(opts.mode)) {\n        self.manager.ids[removedIdentifier.id] = removedIdentifier.identifier;\n    }\n};\n\n// Remove destroyed nipple from the lists\nCollection.prototype.onDestroyed = function(evt, nipple) {\n    var self = this;\n    if (self.nipples.indexOf(nipple) >= 0) {\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\n    }\n    if (self.actives.indexOf(nipple) >= 0) {\n        self.actives.splice(self.actives.indexOf(nipple), 1);\n    }\n    if (self.idles.indexOf(nipple) >= 0) {\n        self.idles.splice(self.idles.indexOf(nipple), 1);\n    }\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\n    }\n\n    // Remove the identifier from our bank\n    self.manager.removeIdentifier(nipple.identifier);\n\n    // We unbind move and end.\n    self.manager.unbindDocument();\n};\n\n// Cleanly destroy the manager\nCollection.prototype.destroy = function () {\n    var self = this;\n    self.unbindEvt(self.options.zone, 'start');\n\n    // Destroy nipples.\n    self.nipples.forEach(function(nipple) {\n        nipple.destroy();\n    });\n\n    // Clean 3DTouch intervals.\n    for (var i in self.pressureIntervals) {\n        if (self.pressureIntervals.hasOwnProperty(i)) {\n            clearInterval(self.pressureIntervals[i]);\n        }\n    }\n\n    // Notify the manager passing the instance\n    self.trigger('destroyed', self.nipples);\n    // We unbind move and end.\n    self.manager.unbindDocument();\n    // Unbind everything.\n    self.off();\n};\n\nexport default Collection;\n","import Collection from './collection';\nimport Super from './super';\nimport * as u from './utils';\n\n///////////////////////\n///     MANAGER     ///\n///////////////////////\n\nfunction Manager (options) {\n    var self = this;\n    self.ids = {};\n    self.index = 0;\n    self.collections = [];\n    self.scroll = u.getScroll();\n\n    self.config(options);\n    self.prepareCollections();\n\n    // Listen for resize, to reposition every joysticks\n    var resizeHandler = function () {\n        var pos;\n        self.collections.forEach(function (collection) {\n            collection.forEach(function (nipple) {\n                pos = nipple.el.getBoundingClientRect();\n                nipple.position = {\n                    x: self.scroll.x + pos.left,\n                    y: self.scroll.y + pos.top\n                };\n            });\n        });\n    };\n    u.bindEvt(window, 'resize', function () {\n        u.throttle(resizeHandler);\n    });\n\n    // Listen for scrolls, so we have a global scroll value\n    // without having to request it all the time.\n    var scrollHandler = function () {\n        self.scroll = u.getScroll();\n    };\n    u.bindEvt(window, 'scroll', function () {\n        u.throttle(scrollHandler);\n    });\n\n    return self.collections;\n}\n\nManager.prototype = new Super();\nManager.constructor = Manager;\n\nManager.prototype.prepareCollections = function () {\n    var self = this;\n    // Public API Preparation.\n    self.collections.create = self.create.bind(self);\n    // Listen to anything\n    self.collections.on = self.on.bind(self);\n    // Unbind general events\n    self.collections.off = self.off.bind(self);\n    // Destroy everything\n    self.collections.destroy = self.destroy.bind(self);\n    // Get any nipple\n    self.collections.get = function (id) {\n        var nipple;\n        // Use .every() to break the loop as soon as found.\n        self.collections.every(function (collection) {\n            nipple = collection.get(id);\n            return nipple ? false : true;\n        });\n        return nipple;\n    };\n};\n\nManager.prototype.create = function (options) {\n    return this.createCollection(options);\n};\n\n// Collection Factory\nManager.prototype.createCollection = function (options) {\n    var self = this;\n    var collection = new Collection(self, options);\n\n    self.bindCollection(collection);\n    self.collections.push(collection);\n\n    return collection;\n};\n\nManager.prototype.bindCollection = function (collection) {\n    var self = this;\n    var type;\n    // Bubble up identified events.\n    var handler = function (evt, data) {\n        // Identify the event type with the nipple's identifier.\n        type = evt.type + ' ' + data.id + ':' + evt.type;\n        self.trigger(type, data);\n    };\n\n    // When it gets destroyed we clean.\n    collection.on('destroyed', self.onDestroyed.bind(self));\n\n    // Other events that will get bubbled up.\n    collection.on('shown hidden rested dir plain', handler);\n    collection.on('dir:up dir:right dir:down dir:left', handler);\n    collection.on('plain:up plain:right plain:down plain:left', handler);\n};\n\nManager.prototype.bindDocument = function () {\n    var self = this;\n    // Bind only if not already binded\n    if (!self.binded) {\n        self.bindEvt(document, 'move')\n            .bindEvt(document, 'end');\n        self.binded = true;\n    }\n};\n\nManager.prototype.unbindDocument = function (force) {\n    var self = this;\n    // If there are no touch left\n    // unbind the document.\n    if (!Object.keys(self.ids).length || force === true) {\n        self.unbindEvt(document, 'move')\n            .unbindEvt(document, 'end');\n        self.binded = false;\n    }\n};\n\nManager.prototype.getIdentifier = function (evt) {\n    var id;\n    // If no event, simple increment\n    if (!evt) {\n        id = this.index;\n    } else {\n        // Extract identifier from event object.\n        // Unavailable in mouse events so replaced by latest increment.\n        id = evt.identifier === undefined ? evt.pointerId : evt.identifier;\n        if (id === undefined) {\n            id = this.latest || 0;\n        }\n    }\n\n    if (this.ids[id] === undefined) {\n        this.ids[id] = this.index;\n        this.index += 1;\n    }\n\n    // Keep the latest id used in case we're using an unidentified mouseEvent\n    this.latest = id;\n    return this.ids[id];\n};\n\nManager.prototype.removeIdentifier = function (identifier) {\n    var removed = {};\n    for (var id in this.ids) {\n        if (this.ids[id] === identifier) {\n            removed.id = id;\n            removed.identifier = this.ids[id];\n            delete this.ids[id];\n            break;\n        }\n    }\n    return removed;\n};\n\nManager.prototype.onmove = function (evt) {\n    var self = this;\n    self.onAny('move', evt);\n    return false;\n};\n\nManager.prototype.onend = function (evt) {\n    var self = this;\n    self.onAny('end', evt);\n    return false;\n};\n\nManager.prototype.oncancel = function (evt) {\n    var self = this;\n    self.onAny('end', evt);\n    return false;\n};\n\nManager.prototype.onAny = function (which, evt) {\n    var self = this;\n    var id;\n    var processFn = 'processOn' + which.charAt(0).toUpperCase() +\n        which.slice(1);\n    evt = u.prepareEvent(evt);\n    var processColl = function (e, id, coll) {\n        if (coll.ids.indexOf(id) >= 0) {\n            coll[processFn](e);\n            // Mark the event to avoid cleaning it later.\n            e._found_ = true;\n        }\n    };\n    var processEvt = function (e) {\n        id = self.getIdentifier(e);\n        u.map(self.collections, processColl.bind(null, e, id));\n        // If the event isn't handled by any collection,\n        // we need to clean its identifier.\n        if (!e._found_) {\n            self.removeIdentifier(id);\n        }\n    };\n\n    u.map(evt, processEvt);\n\n    return false;\n};\n\n// Cleanly destroy the manager\nManager.prototype.destroy = function () {\n    var self = this;\n    self.unbindDocument(true);\n    self.ids = {};\n    self.index = 0;\n    self.collections.forEach(function(collection) {\n        collection.destroy();\n    });\n    self.off();\n};\n\n// When a collection gets destroyed\n// we clean behind.\nManager.prototype.onDestroyed = function (evt, coll) {\n    var self = this;\n    if (self.collections.indexOf(coll) < 0) {\n        return false;\n    }\n    self.collections.splice(self.collections.indexOf(coll), 1);\n};\n\nexport default Manager;\n","import Manager from './manager';\n\nconst factory = new Manager();\nexport default {\n    create: function (options) {\n        return factory.create(options);\n    },\n    factory: factory\n};\n","import nipplejs from 'nipplejs';\n\nAFRAME.registerComponent(\"joystick-controls\", {\n    schema: {\n        moveSpeed:  { type: 'number', default: 1 },\n        turnSpeed:  { type: 'number', default: 1 },\n        margin: { type: 'vec2', default: {x:50,y:50} },\n        color:  { type: 'color', default: '#fff' },\n        damping: { type: 'number', default: 0.001 }\n    },\n    init: function() {\n        const THIS = this;\n        this.move = { x:0, y:0 };\n        this.dir = 1;\n\n        const joyDiv = this.createJoyWrapper();\n        this.joystick = nipplejs.create({\n            zone: joyDiv,\n            mode: 'static',\n            position: { left:'50%', top:'50%' },\n            color: this.data.color\n        });\n\n        this.joystick.on('start', (e, data) => {\n            // start drag\n            THIS.moving = true;\n        }).on('move', (e, data) => {\n            // drag move\n            THIS.move.x = data.vector.x * 100;\n            THIS.move.y = data.vector.y * 100;\n        }).on('end', (e, data) => {\n            // stop drag\n            AFRAME.ANIME({\n                targets: this.move,\n                x: 0,\n                y: 0,\n                duration: 1 / THIS.data.damping,\n                easing: 'easeOutCubic',\n                onComplete: () => { THIS.moving = false; }\n            });\n            // THIS.move.x = THIS.move.y = 0;\n        }).on('dir:up plain:up', (e, data) => {\n            // drag up direction\n            THIS.dir = 1;\n        }).on('dir:down plain:down', (e, data) => {\n            // drag down direction\n            THIS.dir = -1;\n        });\n\n        this.rot = this.el.getAttribute(\"rotation\");\n        this.pos = this.el.getAttribute(\"position\");\n    },\n    createJoyWrapper() {\n        const wrapper = document.createElement('div');\n        wrapper.setAttribute('class', 'joystick-wrapper');\n        document.body.appendChild(wrapper);\n        this.insertCSS(`\n            .joystick-wrapper { position:fixed; left:${this.data.margin.x}px; bottom:${this.data.margin.y}px; width:100px; height:100px; border-radius:50%; z-index:9999; }\n            .joystick-wrapper .nipple .front { box-shadow: 0 0 8px rgba(0,0,0,.3); }\n            .joystick-wrapper .nipple .back  { border: 1px solid rgba(0,0,0,.1); }\n        `);\n        return wrapper;\n    },\n    insertCSS(cssText) {\n        if (document.querySelector('#joystick-controls-style')) return;\n        \n        const styleSheet = document.createElement('style');\n        styleSheet.id = 'joystick-controls-style';\n        styleSheet.innerHTML = cssText;\n        document.head.appendChild(styleSheet);\n    },\n    tick: function() {\n        if (!this.moving) return;\n        \n        this.rot.y -= this.move.x * this.data.turnSpeed / 200 * this.dir;\n        this.el.setAttribute(\"rotation\", this.rot);\n\n        const speed = this.move.y * this.data.moveSpeed / 2000;\n\n        this.pos.x -= speed * Math.sin(this.rot.y * Math.PI / 180);\n        this.pos.z -= speed * Math.cos(this.rot.y * Math.PI / 180);\n    }\n});"],"names":["distance","p1","p2","dx","dy","angle","degrees","findCoord","p","d","a","b","radians","isPressed","evt","timers","throttle","cb","bindEvt","el","arg","handler","types","type","i","unbindEvt","prepareEvent","getScroll","x","y","applyPosition","pos","getTransitionStyle","property","values","time","obj","configStylePropertyObject","st","j","max","getVendorStyle","value","prop","vendor","extend","objA","objB","safeExtend","map","ar","fn","clamp","nipplePos","size","isTouch","isPointer","isMSPointer","events","toBind","secondBind","Super","self","data","options","u.safeExtend","u.bindEvt","u.unbindEvt","Nipple","collection","animTime","borderStyle","u.getVendorStyle","transitStyle","u.getTransitionStyle","styles","u.extend","display","rest","newPosition","position","rAngle","angle45","angle90","direction","directionX","directionY","oldDirection","same","Collection","manager","computedStyle","nips","id","opts","nipple","identifier","scroll","toPutOn","offset","dumb","dumbBox","u.applyPosition","touch","previousPressure","pressure","origEvt","u.prepareEvent","process","k","t","e","u.map","indexInIdles","nip","u.distance","u.isPressed","elBox","dist","u.angle","u.radians","force","raw","clamped_dist","clamped_pos","u.findCoord","u.clamp","delta_x","delta_y","xPosition","yPosition","toSend","removedIdentifier","Manager","u.getScroll","resizeHandler","u.throttle","scrollHandler","removed","which","processFn","processColl","coll","processEvt","factory","nipplejs","THIS","joyDiv","wrapper","cssText","styleSheet","speed"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}